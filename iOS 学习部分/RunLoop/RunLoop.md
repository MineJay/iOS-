# iOS RunLoop


> 

### 基本概念

字面上看，就是运行循环的意思。通常来说，一个线程一次只能执行一个任务，执行完了以后，就退出。但是现在想让它运行完了以后不退出，进入休眠状态，如果需要再次用到时，可以立马再次唤醒它。这就是 RunLoop 起的作用了。

RunLoop 是用来管理事件/消息，让线程在没有处理消息时进入休眠状态，从而避免资源占用，在新的消息到来时，立刻被唤醒。

RunLoop 内部就是 do-while 循环，在这个循环内不断处理各种任务，比如：Timer、Observe

### 基本作用

1. 保持程序的持续运行
2. 处理 APP 中的各种事件，触摸、定时器等
3. 节省资源

### RunLoop 与线程

1. 每个线程都有与之对应的唯一的 RunLoop 对象，存在一个全局的 Dictionary 中。
2. 主线程的 RunLoop 已经自动创建好，子线程的 RunLoop 需要手动创建。
3. RunLoop 在第一次获取时创建，在线程结束时销毁。

### 应用场景

1. 常驻线程：开启一个常驻线程，让这个线程不进行销毁，进入休眠态，等待被其他线程唤醒。比如进行长期监控。
2. Timer 定时器：控制定时器在某些特定模式下执行。
3. 自动释放池
4. 事件响应
5. 手势识别
6. 界面更新



































